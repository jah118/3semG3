@using System.Web.UI.HtmlControls
@model RestaurantWebApp.Model.FoodViewModel
@*@model Tuple<RestaurantWebApp.DataTransferObject.OrderDTO, RestaurantWebApp.Model.FoodViewModel>*@
@using (Html.BeginForm())
{
    ViewBag.Title = "Madbestilling";
}

@section Styles {

}

<h2>Madbestilling</h2>
<div class="container">
    <div class="row">

        <div class="form-horizontal">
            <div class="form-group">

                <div class="col-md-5 float-left">
                    <label>Retter</label>
                    <select id="tsFoods" multiple="multiple" name="tsFoods" size="20">

                        @foreach (var x in Model.Foods)
                        {
                            <option name="@x.Name" value="@x.Id +@x.Name  ">@x.Name </option>
                        }
                    </select>
                    <button id="AddFoodsBtn"> vælg mad</button>
                    @*<input type="button" onclick="addFoods()" value="Vælg ret/retter" />*@
                </div>
                <div class="col-md-5 float-right">
                    <label> Drikkevarer</label>
                    @*@Html.ListBoxFor(model => model.Drinks., new MultiSelectList(Model.Drinks, "Id", "Name"), new { @class = "control - label", id="myList" })*@
                    @*    @Html.ListBoxFor(model => model.Drinks, new MultiSelectList(Model.Drinks, "Id", "Name"), new { @class = "control - label", id = "myList" })*@
                    <select id="tsDrinks" multiple="multiple" name="tsDrinks" size="20">

                        @foreach (var x in Model.Drinks)
                        {
                            <option name="@x.Name" value="@x.Id +@x.Name  ">@x.Name </option>
                        }
                    </select>
                    <input id="AddDrinksBtn" type="button" value="Vælg drikkevarer" />
                </div>

                <div id="summaryDiv" class="col-md-12 float-left">
                    <hr />
                    <select id="tsDrinks1" multiple="multiple" name="tsDrinks1" size="20" style="min-width: 150px; width: 1px;">
                    </select>
                    @*@Html.ListBoxFor(model => model.Foods,
                        new SelectList(Model.SelectedOrder.Foods, "Id", "Name"),
                        new {Id = "summaryList", style = "width:100%"})*@
                    @* //TODO this needs a impl at this point no remove function *@
                    <input id="RemoveFromSummaryList" type="button" accept="removeFoods" value="Fjern ret/retter" onclick=removeFoods();/>
                </div>
            </div>
        </div>
    </div>
</div>

<div>
    <input type="submit" value="Gem mad og drikke " class="btn btn-primary" />
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#AddDrinksBtn').click(function () {
                var selected = $('#tsDrinks').val();
                $.each(selected,
                    function (key, val) {
                        $('#tsDrinks1').append($("<option></option>").attr("value", val).text(val));
                    });

                //works kinda
                //$.each(selected, function (i, item) {
                //    $('#tsDrinks1').append($('<option></option>', {
                //        value: item.value,
                //        text: item.text
                //    }));
                //});

                //alert(selected);
                //$.each(leftselected,
                //    function(key, value) {
                //        $('#rightSelectednumbers').append($("<option></option>").attr("value", value).text(value));
                //    });
            });
        });

        $(document).ready(function () {
            $('#AddFoodsBtn').click(function () {
                var selected = $('#tsFoods').val();
                $.each(selected,
                    function (key, val) {
                        $('#tsDrinks1').append($("<option></option>").attr("value", val).text(val));
                    });
            });
        });
    </script>

    <!--<script>

        //$('#test').click(function () { alert("Handler for .click() called.") });

        $('#test').click(function () {
            var selected = $('#myList option:selected').val;
            //alert("Handler for .click() called." + selected );
            $.each(selected,
                function (key, value) {
                    $('#summaryList').append($("<option></option>").attr("value", value).text(value));
                });
        });
    </script>
    <script>
        var foodList = document.getElementById("foodList");

        function addFoods(data) {
            console.write(data + "");-->
    @*var x = foodList.selectedItem();
        var foods = @Model.Item2;
        var summaryList = @Model.Item1.Foods;
        var selected = foodList.selectedItem;
        summaryList.Add(selected);
        var r = 1 + 1;*@

    <!--}-->
    @*function removeFoods() {
            var foods = @Model.Item2;
            var summaryList = @Model.Item1.Foods;
            var selected = summaryList.selectedItem;
            summaryList.Remove(selected);

        }*@
    <!--</script>-->
}